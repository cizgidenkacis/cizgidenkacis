<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>√áizgiden Ka√ßƒ±≈ü</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: white;
        font-family: Arial, sans-serif;
        user-select: none;
    }

    /* Giri≈ü ekranƒ± */
    #mainMenu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: black;
    }

    .menuBtn {
        padding: 18px 40px;
        background: black;
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 30px;
        margin-top: 20px;
        cursor: pointer;
    }

    /* Oyun UI */
    #scoreBox {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 26px;
        background: rgba(0,0,0,0.1);
        padding: 12px 22px;
        border-radius: 10px;
        font-weight:bold;
        color:black;
        display:none;
    }

    #pauseBtn, #homeBtn {
        position: absolute;
        top: 20px;
        padding: 12px 20px;
        background: black;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
        display:none;
    }

    #pauseBtn { right: 20px; }
    #homeBtn { right: 120px; }

    /* Game Over */
    #gameOverMenu {
        display:none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align:center;
    }

    .gameOverBtn {
        padding: 15px 35px;
        background: black;
        color: white;
        border: none;
        border-radius: 10px;
        margin: 10px;
        font-size: 26px;
        cursor:pointer;
    }

    /* Kanvas */
    #gameCanvas {
        position: absolute;
        top: 0;
        left: 0;
    }

</style>
</head>
<body>

<!-- Gƒ∞Rƒ∞≈û MEN√úS√ú -->
<div id="mainMenu">
    <h1 style="font-size:55px; font-weight:bold">√áƒ∞ZGƒ∞DEN KA√áI≈û</h1>
    <button class="menuBtn" onclick="startGame()">BA≈ûLA</button>
</div>

<!-- KANVAS -->
<canvas id="gameCanvas"></canvas>

<!-- SKOR -->
<div id="scoreBox">Skor: 0<br>En Y√ºksek: 0</div>
<button id="pauseBtn" onclick="pauseGame()">Dur</button>
<button id="homeBtn" onclick="backToMenu()">üè†</button>

<!-- OYUN Bƒ∞TTƒ∞ MEN√ú -->
<div id="gameOverMenu">
    <h1 style="font-size:45px; color:black;">Oyun Bitti</h1>
    <button class="gameOverBtn" onclick="resetGame()">Tekrar Oyna</button><br>
    <button class="gameOverBtn" onclick="backToMenu()">Ana Men√º</button>
</div>

<script>
let running = false;
let paused = false;
let gameOver = false;

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* Karakter ayarlarƒ± */
const player = {
    x: canvas.width/2,
    y: canvas.height - 120,
    size: 80,
    emoji: "üêµ"
};

let obstacles = [];
let score = 0;
let highScore = Number(localStorage.getItem("highScore") || 0);

/* Ba≈ülat */
function startGame(){
    mainMenu.style.display = "none";
    gameOverMenu.style.display = "none";
    scoreBox.style.display = "block";
    pauseBtn.style.display = "block";
    homeBtn.style.display = "block";

    running = true;
    paused = false;
    gameOver = false;

    score = 0;
    obstacles = [];

    loop();
}

function pauseGame(){
    paused = !paused;
    pauseBtn.textContent = paused ? "Devam" : "Dur";
}

function backToMenu(){
    running = false;
    paused = false;
    gameOver = false;

    mainMenu.style.display = "block";
    scoreBox.style.display = "none";
    pauseBtn.style.display = "none";
    homeBtn.style.display = "none";
    gameOverMenu.style.display = "none";
}

function resetGame(){ startGame(); }

/* Engel √ºret */
function spawnObstacle(){
    obstacles.push({
        x: Math.random() * (canvas.width - 150),
        y: -20,
        w: 150,
        h: 10,
        speed: 6
    });
}

/* Kontrol (SAƒûA-SOLA s√ºr√ºkleme) */
let dragging = false;
canvas.addEventListener("pointerdown", e=>{ dragging = true; move(e); });
canvas.addEventListener("pointerup", ()=> dragging = false);
canvas.addEventListener("pointermove", e=>{ if(dragging) move(e); });

function move(e){
    if(!running || paused || gameOver) return;
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    player.x = Math.max(0, Math.min(canvas.width - player.size, x - player.size/2));
}

/* √áiz */
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // √áizgisel arka plan
    ctx.fillStyle = "rgba(0,0,0,0.05)";
    for(let i=0;i<canvas.height;i+=40){
        ctx.fillRect(0,i,canvas.width,2);
    }

    ctx.font = player.size + "px serif";
    ctx.fillText(player.emoji, player.x, player.y);

    ctx.fillStyle = "black";
    obstacles.forEach(o=>{ ctx.fillRect(o.x, o.y, o.w, o.h); });

    scoreBox.innerHTML = `Skor: ${score}<br>En Y√ºksek: ${highScore}`;
}

/* G√ºncelle */
function update(){
    if(!running || paused || gameOver) return;

    if(Math.random() < 0.03) spawnObstacle();

    obstacles.forEach((o,i)=>{
        o.y += o.speed;

        if(o.y > canvas.height){
            obstacles.splice(i,1);
            score++;
        }

        // √áarpƒ±≈üma kontrol
        if(
            player.x < o.x + o.w &&
            player.x + player.size > o.x &&
            player.y < o.y + o.h &&
            player.y + player.size > o.y
        ){
            endGame();
        }
    });
}

function endGame(){
    gameOver = true;
    running = false;

    if(score > highScore){
        highScore = score;
        localStorage.setItem("highScore", highScore);
    }

    gameOverMenu.style.display = "block";
}

function loop(){
    update();
    draw();
    if(running) requestAnimationFrame(loop);
}

</script>
</body>
</html>
