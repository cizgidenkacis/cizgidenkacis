<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>√áizgiden Ka√ßƒ±≈ü</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #ffffff;
        background-image: repeating-linear-gradient(
            45deg,
            #f1f1f1 0px,
            #f1f1f1 10px,
            #ffffff 10px,
            #ffffff 20px
        );
        font-family: Arial, sans-serif;
        user-select: none;
    }

    #gameCanvas {
        position: absolute;
        top: 0;
        left: 0;
    }

    /* --- Gƒ∞Rƒ∞≈û EKRANI --- */
    #mainMenu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: black;
    }

    .menuBtn {
        padding: 16px 35px;
        background: #000000;
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 28px;
        margin: 10px;
        cursor: pointer;
        box-shadow:0 4px 10px rgba(0,0,0,0.4);
    }

    #scoreBox {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 26px;
        background: rgba(255,255,255,0.8);
        padding: 12px 22px;
        border-radius: 10px;
        font-weight:bold;
    }

    #pauseBtn, #homeBtn {
        position: absolute;
        top: 20px;
        right: 20px;
        padding: 12px 18px;
        background: #333;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
    }
    #homeBtn { right: 110px; }

    #restartMenu {
        display:none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align:center;
    }
    .restartBtn {
        padding: 16px 36px;
        background: #ff5757;
        color: white;
        border: none;
        font-size: 26px;
        border-radius: 12px;
        cursor: pointer;
        margin:10px;
    }
</style>
</head>
<body>

<div id="mainMenu">
    <h1 style="font-size: 52px; font-weight:bold;">√áizgiden Ka√ßƒ±≈ü</h1>
    <button class="menuBtn" onclick="startGame()">Ba≈üla</button>
</div>

<canvas id="gameCanvas"></canvas>
<div id="scoreBox" style="display:none">Skor: 0<br>En Y√ºksek: 0<br>Seviye: 1</div>
<button id="pauseBtn" style="display:none" onclick="pauseGame()">Dur</button>
<button id="homeBtn" style="display:none" onclick="backToMenu()">üè†</button>

<div id="restartMenu">
    <h2 style="color:black; font-size:32px;">Oyun Bitti!</h2>
    <button class="restartBtn" onclick="startGame()">Tekrar Oyna</button><br>
    <button class="restartBtn" onclick="backToMenu()">Ana Men√º</button>
</div>

<script>
let gameStarted = false;
let paused = false;
let gameOver = false;
let level = 1;

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
    x: canvas.width * 0.1,
    y: canvas.height / 2,
    size: 70,
    emoji: "üêµ",
    speedY: 0
};

let obstacles = [];
let score = 0;
let highScore = Number(localStorage.getItem("highScore") || 0);

// --- Karakterin kontrol√º (YUKARI-A≈ûAƒûI S√úR√úKLEME) ---
let touching = false;
window.addEventListener("touchstart", e => { touching = true; });
window.addEventListener("touchend", e => { touching = false; });
window.addEventListener("touchmove", e => {
    if (!touching) return;
    player.y = e.touches[0].clientY - player.size / 2;
});
window.addEventListener("mousemove", e => {
    if (!gameStarted || paused || gameOver) return;
    if (e.buttons === 1) player.y = e.clientY - player.size / 2;
});

function startGame() {
    mainMenu.style.display = "none";
    restartMenu.style.display = "none";
    scoreBox.style.display = "block";
    pauseBtn.style.display = "block";
    homeBtn.style.display = "block";

    paused = false;
    gameOver = false;
    gameStarted = true;

    score = 0;
    level = 1;
    obstacles = [];
    player.y = canvas.height / 2;

    loop();
}

function pauseGame() {
    paused = !paused;
    pauseBtn.textContent = paused ? "Devam" : "Dur";
}

function backToMenu() {
    gameStarted = false;
    paused = false;
    mainMenu.style.display = "block";
    scoreBox.style.display = "none";
    pauseBtn.style.display = "none";
    homeBtn.style.display = "none";
    restartMenu.style.display = "none";
}

// --- ENGELLER ---
function spawnObstacle() {
    obstacles.push({
        x: Math.random() * (canvas.width - 200) + 100,
        y: -20,
        w: 160,
        h: 10,
        speed: 7  // T√úM ENGELLER E≈ûƒ∞T HIZ
    });
}

function update() {
    if (!gameStarted || paused || gameOver) return;

    // LEVEL Sƒ∞STEMƒ∞
    level = Math.floor(score / 150) + 1;

    // ENGELLERƒ∞ HAREKET ETTƒ∞R
    obstacles.forEach((o, i) => {
        o.y += o.speed;
        if (o.y > canvas.height) {
            obstacles.splice(i, 1);
            score++;
        }

        // √áARPI≈ûMA
        if (player.x < o.x + o.w &&
            player.x + player.size > o.x &&
            player.y < o.y + o.h &&
            player.y + player.size > o.y) {
            endGame();
        }
    });

    // ENGEL √úRET
    if (Math.random() < 0.02) spawnObstacle();

    scoreBox.innerHTML =
        `Skor: ${score}<br>En Y√ºksek: ${highScore}<br>Seviye: ${level}`;
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Karakter
    ctx.font = player.size + "px serif";
    ctx.fillText(player.emoji, player.x, player.y);

    // Engeller
    ctx.fillStyle = "#000";
    obstacles.forEach(o => {
        ctx.fillRect(o.x, o.y, o.w, o.h);
    });
}

function endGame() {
    gameOver = true;
    restartMenu.style.display = "block";

    if (score > highScore) {
        highScore = score;
        localStorage.setItem("highScore", highScore);
    }
}

function loop() {
    update();
    draw();
    if (gameStarted) requestAnimationFrame(loop);
}
</script>
</body>
</html>
