<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>√áizgiden Ka√ßƒ±≈ü</title>
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: linear-gradient(120deg, #4e54c8, #8f94fb);
        background-size: 400% 400%;
        animation: bgMove 12s ease infinite;
        font-family: Arial, sans-serif;
        user-select: none;
    }
    @keyframes bgMove {
        0% {background-position: 0% 50%;}
        50% {background-position: 100% 50%;}
        100% {background-position: 0% 50%;}
    }

    #gameCanvas {
        position: absolute;
        top: 0;
        left: 0;
    }

    #mainMenu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color:white;
    }

    .menuBtn {
        padding: 16px 35px;
        background: #ffb400;
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 28px;
        margin: 10px;
        cursor: pointer;
        box-shadow:0 4px 10px rgba(0,0,0,0.4);
    }

    #scoreBox {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 26px;
        background: rgba(255,255,255,0.7);
        padding: 12px 22px;
        border-radius: 10px;
        font-weight:bold;
    }

    #pauseBtn, #homeBtn {
        position: absolute;
        top: 20px;
        right: 20px;
        padding: 12px 18px;
        background: #333;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
    }
    #homeBtn { right: 100px; }

    #restartBtn {
        display:none;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 16px 36px;
        background: #ff5757;
        color: white;
        border: none;
        font-size: 26px;
        border-radius: 12px;
        cursor: pointer;
        box-shadow:0 4px 10px rgba(0,0,0,0.4);
    }
</style>
</head>
<body>

<div id="mainMenu">
    <h1 style="font-size: 52px; text-shadow: 3px 3px #000;">√áizgiden Ka√ßƒ±≈ü</h1>
    <button class="menuBtn" onclick="startGame()">Ba≈üla</button>
</div>

<canvas id="gameCanvas"></canvas>
<div id="scoreBox" style="display:none">Skor: 0<br>En Y√ºksek: 0</div>
<button id="pauseBtn" style="display:none" onclick="pauseGame()">Dur</button>
<button id="homeBtn" style="display:none" onclick="backToMenu()">üè†</button>
<button id="restartBtn">Tekrar Oyna</button>

<script>
let gameStarted = false;
let paused = false;
let gameOver = false;

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let player = {
    x: canvas.width * 0.1,
    y: canvas.height / 2,
    size: 60,
    emoji: "üêµ", // G√ñR√úN√úR YAPILDI
    speedY: 0
};

let obstacles = [];
let score = 0;
let highScore = Number(localStorage.getItem("highScore") || 0);

const gravity = 0.8;

restartBtn.onclick = resetGame;

function startGame() {
    mainMenu.style.display = "none";
    scoreBox.style.display = "block";
    pauseBtn.style.display = "block";
    homeBtn.style.display = "block";

    paused = false;
    gameOver = false;
    gameStarted = true;
    score = 0;
    obstacles = [];
    player.y = canvas.height / 2;
    player.speedY = 0;

    loop();
}

function pauseGame() {
    paused = !paused;
    pauseBtn.textContent = paused ? "Devam" : "Dur";
}

function backToMenu() {
    paused = false;
    gameStarted = false;
    mainMenu.style.display = "block";
    scoreBox.style.display = "none";
    pauseBtn.style.display = "none";
    homeBtn.style.display = "none";
}

function spawnObstacle() {
    obstacles.push({
        x: canvas.width,
        w: Math.random() * 200 + 80,
        y: Math.random() * canvas.height,
        h: 8, // ince √ßizgi
        speed: 6 + score * 0.02
    });
}

function resetGame() {
    restartBtn.style.display = "none";
    startGame();
}

window.addEventListener("touchstart", jump);
window.addEventListener("mousedown", jump);
function jump() {
    if (!gameStarted || paused || gameOver) return;
    player.speedY = -14;
}

function update() {
    if (!gameStarted || paused || gameOver) return;

    player.speedY += gravity;
    player.y += player.speedY;

    if (player.y < 0) player.y = 0;
    if (player.y > canvas.height - player.size) player.y = canvas.height - player.size;

    obstacles.forEach((o, i) => {
        o.x -= o.speed;
        if (o.x + o.w < 0) {
            obstacles.splice(i, 1);
            score++;
        }

        if (player.x < o.x + o.w &&
            player.x + player.size > o.x &&
            player.y < o.y + o.h &&
            player.y + player.size > o.y) {
            endGame();
        }
    });

    if (Math.random() < 0.03) spawnObstacle();
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.font = player.size + "px serif";
    ctx.fillText(player.emoji, player.x, player.y);

    ctx.fillStyle = "#ff3b3b";
    obstacles.forEach(o => {
        ctx.fillRect(o.x, o.y, o.w, o.h);
    });

    scoreBox.innerHTML = "Skor: " + score + "<br>En Y√ºksek: " + highScore;
}

function endGame() {
    gameOver = true;
    restartBtn.style.display = "block";

    if (score > highScore) {
        highScore = score;
        localStorage.setItem("highScore", highScore);
    }
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}
</script>
</body>
</html>
